@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <div class="row">
        <div class="col-4">
            <div id="search"></div>
        </div>
    </div>
    <div style="margin-top: 6%">
        <div class="row">
            <div class="col-4">
                <h4>Example of chart</h4>
                <div id="chart"></div>
                <h4>Example of data grid</h4>
                <div id="grid"></div>
            </div>
            <div class="col-8">
                <h4>Example of Esri map</h4>
                <div id="esriMap"></div>
            </div>
        </div>
    </div>
</div>

<script src="https://js.arcgis.com/3.30/"></script>
<script src="js/jquery.min.js"></script>

<script type="text/javascript">
    require([
        "esri/map",
        "esri/dijit/Search",
        "dojo/domReady!"
    ], function (Map, Search) {
        var map = new Map("esriMap", {
            center: [-97.5, 41.5],
            zoom: 4,
            basemap: "topo"
        });
        var search = new Search({
            map: map
        }, "search");
        search.startup();
    });

    function createChart() {
        $("#chart").kendoChart({
            legend: {
                visible: false
            },
            seriesDefaults: {
                type: "bar"
            },
            series: [{
                name: "Total Visits",
                data: [56000, 63000, 74000, 91000, 117000, 138000]
            }, {
                name: "Unique visitors",
                data: [52000, 34000, 23000, 48000, 67000, 83000]
            }],
            valueAxis: {
                max: 140000,
                line: {
                    visible: false
                },
                minorGridLines: {
                    visible: true
                },
                labels: {
                    rotation: "auto"
                }
            },
            categoryAxis: {
                categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
                majorGridLines: {
                    visible: false
                }
            },
            tooltip: {
                visible: true,
                template: "#= series.name #: #= value #"
            }
        });
    }

    $(document).ready(function () {
        $("#grid").kendoGrid({
            dataSource: {
                type: "odata",
                transport: {
                    read: "https://demos.telerik.com/kendo-ui/service/Northwind.svc/Customers"
                },
                pageSize: 20
            },
            height: 550,
            groupable: true,
            sortable: true,
            pageable: {
                refresh: true,
                pageSizes: true,
                buttonCount: 5
            },
            columns: [{
                template: "<div class='customer-photo'" +
                    "style='background-image: url(../content/web/Customers/#:data.CustomerID#.jpg);'></div>" +
                    "<div class='customer-name'>#: ContactName #</div>",
                field: "ContactName",
                title: "Contact Name",
                width: 240
            }, {
                field: "ContactTitle",
                title: "Contact Title"
            }, {
                field: "CompanyName",
                title: "Company Name"
            }, {
                field: "Country",
                width: 150
            }]
        });
    });

    $(document).ready(createChart);
    $(document).bind("kendo:skinChange", createChart);

</script>

<style type="text/css">
    html,
    body,
    #esriMap {
        height: 100%;
        width: 100%;
        margin: 0;
        padding: 0;
    }

    #search {
        display: block;
        position: absolute;
        z-index: 2;
        top: 20px;
        left: 74px;
    }

    .customer-photo {
        display: inline-block;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background-size: 32px 35px;
        background-position: center center;
        vertical-align: middle;
        line-height: 32px;
        box-shadow: inset 0 0 1px #999, inset 0 0 10px rgba(0,0,0,.2);
        margin-left: 5px;
    }

    .customer-name {
        display: inline-block;
        vertical-align: middle;
        line-height: 32px;
        padding-left: 3px;
    }
</style>